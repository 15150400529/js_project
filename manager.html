<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>图书管理系统 15150400529刘玲俊</title>
    <script type="text/javascript" src="jquery.js"></script>
    <style>
        table {
            width: 500px;
            height: 100px;
        }

        th {
            width: 60px;
            height: 30px;
            border: 1px solid blue;
        }

    </style>
</head>

<body>
    <div id="header">
        书名：
        <input type="text" id="name" /> 作者:
        <input type="text" id="au" /> 数量：
        <input type="text" id="num" /> 出版社:
        <input type="text" id="pub" /> 单价：
        <input type="text" id="money" />
        <input type="button" id="addBook" class="add" value="添加图书" />
    </div>
     <div id="find">
       书名：<input type="text" class="txtx" id="tex" >作者名：<input type="text" class="txtx" id="tex2">出版社：<input type="text3" class="txtx" id="tex3" ><input type="button" value="搜索" class="butt">
    </div>
    <table border="1" cellspacing="0" cellpadding="0" id="tab" class="tabb">

        <tr id="clone">
            <td>书名</td>
            <td>作者</td>
            <td>数量</td>
            <td>出版社</td>
            <td>单价</td>
            <td> </td>
        </tr>
        <tbody>

        </tbody>
    </table>


    <script>
        $.ajax({
            url: "books.json",
            dataType: "json",

            success: function(data) {

                //data -- 请求成功的相应数据 responseText

                console.log(data);

                $.each(data.result.list, function(index, item) {
                    console.log(item.bookname);
                    var bookname = item.bookname;
                    var author = item.author;
                    var count = item.count;
                    var publish = item.publish;
                    var price = item.price;

                    var txt = "<tr><td>" + bookname + "</td><td>" + author + "</td><td>" + count + "</td><td>" + publish + "</td><td>" + price + '' + "</td><td>" + '<button id="deleteB" class="but">删除</button>' + "</td></tr>";
                    $(".tabb").append(txt);
                })









                $(document).ready(function() {
                    
                          
                  
                //搜索图书信息
                $("#find").on("click",".butt",ser);
                    function ser(){
                        console.log("find");
                        var text = $("#tex").val();
                        console.log(text);
                         var text2 = $("#tex2").val();
                        var text3 = $("#tex3").val();
                        var len=data.result.list.length;
                        console.log(len);
                      //  console.log(data.result.list[1].bookname);
                        for(var i=0;i<len;i++){
                            if(text==data.result.list[i].bookname){
                                alert("书名:  "+data.result.list[i].bookname+"\n作者:  "+data.result.list[i].author+"\n数量:  "+data.result.list[i].count+"\n出版社:  "+data.result.list[i].publish+"\n价格:  "+data.result.list[i].price);
                           
                            }
                           if(text2==data.result.list[i].author){
                                alert("书名:  "+data.result.list[i].bookname+"\n作者:  "+data.result.list[i].author+"\n数量:  "+data.result.list[i].count+"\n出版社:  "+data.result.list[i].publish+"\n价格:  "+data.result.list[i].price);
                            }
                           if(text3==data.result.list[i].publish){
                                alert("书名:  "+data.result.list[i].bookname+"\n作者:  "+data.result.list[i].author+"\n数量:  "+data.result.list[i].count+"\n出版社:  "+data.result.list[i].publish+"\n价格:  "+data.result.list[i].price);
                            }
                        }
                    }

                    
                    
                    //删除图书信息

                    $("#tab").on("click", ".but", de);

                    function de() {
                        console.log("eeeee");
                        $(this).parent().parent().remove();
                    }

                    
                    //添加图书信息
                    $("#header").on("click", ".add", ad);


                    function ad() {
                     
                        var name = $("#name").val();
                        var au = $("#au").val();
                        var num = $("#num").val();
                        var pub = $("#pub").val();
                        var money = $("#money").val();
                        console.log(name);
                        console.log(au);
                        console.log(num);
                        console.log(pub);
                        console.log(money);
                        var txt2 = "<tr><td>" + name + "</td><td>" + au + "</td><td>" + num + "</td><td>" + pub + "</td><td>" + money + '' + "</td><td>" + '<button id="deleteB" class="but">删除</button>' + "</td></tr>";
                        $(".tabb").append(txt2);

                    }

                });

            },


            error: function(jqxhr, textStatus, err) {
                console.log(jqxhr, textStatus, err)
            }

        })

    </script>



</body>

</html>
